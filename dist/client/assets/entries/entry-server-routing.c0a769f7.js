function he(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function z(e,t){let n;{var i=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=i}return he()&&(n.stack=pe(n.stack,t)),n}function pe(e,t){if(!e)return e;const n=me(e);let i=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:i<t&&ye(o)?(i++,!1):!0).join(`
`)}function ye(e){return e.startsWith("    at ")}function me(e){return e.split(/\r?\n/)}function T(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function w(e){return typeof e=="object"&&e!==null}function ne(e){return Array.from(new Set(e))}const b=T("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),ie="Make sure your client-side code doesn't include(/bundle)",Ee=`The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ${ie} both for a given page.`,re=`Two vite-plugin-ssr client runtime instances are being loaded. ${ie} vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)`;function se(){{const e=ne(b.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;be(!1,t)}}b.checkSingleInstance&&b.instances.length>1&&D(!1,re,{onlyOnce:!0,showStackTrace:!0})}function ve(e){D(b.isClientRouting!==!0,Ee,{onlyOnce:!0,showStackTrace:!0}),D(b.isClientRouting===void 0,re,{onlyOnce:!0,showStackTrace:!0}),b.isClientRouting=!1,e&&(b.checkSingleInstance=!0),se()}function we(e){b.instances.push(e),se()}function be(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function D(e,t,{onlyOnce:n,showStackTrace:i}){if(e)return;const r=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=b,l=n===!0?r:n;if(o.has(l))return;o.add(l)}console.warn(i?new Error(r):r)}const Fe="0.4.133",P={projectName:"vite-plugin-ssr",projectVersion:Fe,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};we(P.projectVersion);const v=T("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},colorer:e=>e,showStackTraceList:new WeakSet}),_e=`[${P.npmPackageName}]`,Pe=`[${P.npmPackageName}@${P.projectVersion}]`,N=2;function s(e,t){var n;if(e)return;const i=(()=>{if(!t)return null;const l=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${P.projectName} maintainers; you can ignore this): ${l}`})();let r=[`You stumbled upon a bug in ${P.projectName}'s source code.`,`Go to ${P.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,i].filter(Boolean).join(" ");r=L(r,"Bug"),r=j(r,!0);const o=z(r,N);throw(n=v.onBeforeLog)===null||n===void 0||n.call(v),o}function m(e,t,{showStackTrace:n}={}){var i;if(e)return;t=L(t,"Wrong Usage"),t=j(t);const r=z(t,N);throw n&&v.showStackTraceList.add(r),(i=v.onBeforeLog)===null||i===void 0||i.call(v),r}function Re(e){return e=L(e,"Error"),e=j(e),z(e,N)}function R(e,t,{onlyOnce:n=!0,showStackTrace:i}={}){var r;if(!e){if(t=L(t,"Warning"),t=j(t),n){const{alreadyLogged:o}=v,l=n===!0?t:n;if(o.has(l))return;o.add(l)}if((r=v.onBeforeLog)===null||r===void 0||r.call(v),i){const o=new Error(t);v.showStackTraceList.add(o),v.logger(o,"warn")}else v.logger(t,"warn")}}function L(e,t){let n=`[${t}]`;const i=t==="Info"?"blue":t==="Warning"?"yellow":"red";n=v.colorer(n,i);const r=e.startsWith("[")?"":" ";return`${n}${r}${e}`}function j(e,t=!1){return`${t?Pe:_e}${e}`}function B(){return typeof window<"u"&&typeof window.scrollY=="number"}const M=T("utils/assertRouterType.ts",{});function xe(){Se(M.isClientRouting!==!0),M.isClientRouting=!1}function Se(e){m(B(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),R(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const Te=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],oe=["vue","svelte","marko","md","mdx"],$e=[...Te,...oe];function le(e){const t=$e.some(n=>e.endsWith("."+n));return s(!Oe(e)||t),t}function Oe(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function Le(e){return oe.some(t=>e.endsWith("."+t))}function O(e,t,n){return typeof e=="string"?J(e.split(""),t,n).join(""):J(e,t,n)}function J(e,t,n){const i=[];let r=t>=0?t:e.length+t;s(r>=0&&r<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(r===o||(r===e.length&&(r=0),r===o));){const l=e[r];s(l!==void 0),i.push(l),r++}return i}function je(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Ce(e,t){s(je(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...i]=e.split("#");s(n!==void 0);const r=["",...i].join("#")||null;s(r===null||r.startsWith("#"));const o=r===null?"":k(r.slice(1)),[l,...a]=n.split("?");s(l!==void 0);const u=["",...a].join("?")||null;s(u===null||u.startsWith("?"),{url:e,searchOriginal:u});const c={},g={};Array.from(new URLSearchParams(u||"")).forEach(([E,G])=>{c[E]=G,g[E]=[...g[E]||[],G]});const{origin:f,pathnameResolved:p}=De(l,t);s(f===null||f===k(f),{origin:f}),s(p.startsWith("/"),{url:e,pathnameResolved:p}),s(f===null||e.startsWith(f),{url:e,origin:f});const h=l.slice((f||"").length);{const E=`${f||""}${h}${u||""}${r||""}`;s(e===E,{url:e,urlRecreated:E})}let{pathname:y,hasBaseServer:F}=Ae(p,t);return y=Ie(y),s(y.startsWith("/")),{origin:f,pathname:y,pathnameOriginal:h,hasBaseServer:F,search:c,searchAll:g,searchOriginal:u,hash:o,hashOriginal:r}}function k(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function Ie(e){return e.split("/").map(t=>k(t).split("/").join("%2F")).join("/")}function De(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let i=!1;const r="tauri://",o="http://";e.startsWith(r)&&(i=!0,e=o+e.slice(r.length));let l,a;try{const u=new URL(e);l=u.origin,a=u.pathname}catch{l=null;let c=typeof window<"u"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);c=c||"http://fake.example.org"+t,a=new URL(e,c).pathname}return a||(a="/"),i&&(s(l),s(l.startsWith(o)),l=r+l.slice(o.length)),s(a.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:a}),s(a===a.split("?")[0].split("#")[0]),{origin:l,pathnameResolved:a}}function ke(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function Ae(e,t){ke(e),s(We(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let i=t;return t.endsWith("/")&&n===O(t,0,-1)&&(i=O(t,0,-1),s(n===i)),n.startsWith(i)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(i)),n=n.slice(i.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function We(e){return e.startsWith("/")}function x(e,t){Object.assign(e,t)}function C(e){return e instanceof Function||typeof e=="function"}function ze(e){return(t,n)=>{const i=e(t),r=e(n);if(s([!0,!1,null].includes(i)),s([!0,!1,null].includes(r)),i===r)return 0;if(i===!0||r===!1)return-1;if(r===!0||i===!1)return 1;s(!1)}}function Ne(e){return ze(t=>{const n=e(t);return n===null?null:!n})}function d(e,t,n="unknown"){if(!w(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const i=e[t];return n==="array"?Array.isArray(i):n==="object"?w(i):n==="string[]"?Array.isArray(i)&&i.every(r=>typeof r=="string"):n==="function"?C(i):Array.isArray(n)?typeof i=="string"&&n.includes(i):n==="null"?i===null:n==="undefined"?i===void 0:n==="true"?i===!0:n==="false"?i===!1:typeof i===n}function Be(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const Ve=e=>e!=null,He="\\";function ae(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes(He),t(e))}const Ue=["$$registrations","_rerender_only"],Ge=[".md",".mdx"];function Me(e,t){Je(e,t,!0)}function Je(e,t,n){const r=Object.keys(e).filter(a=>!Ue.includes(a)),o=r.filter(a=>a!=="default"),l=r.includes("default");if(o.length===0){if(l)return;s(r.length===0),m(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!Ge.some(a=>t.endsWith(a))){const a=o.join(", ");n?R(o.length===0,`${t} should only have a default export: remove \`export { ${a} }\``,{onlyOnce:!0}):R(o.length===0,`${t} replace \`export { ${a} }\` with \`export default { ${a} }\``,{onlyOnce:!0})}}function Ye(e){return Object.entries(e)}const qe=["clientRouting"];function Ke(e){qe.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;m(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),m(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const ce=["render","clientRouting","prerender","doNotPrerender"];function Xe(e,t){m(!ce.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Qe(e,t){const n={},i={},r={};if(e.forEach(a=>{Ze(a).forEach(({exportName:c,exportValue:g,isFromDefaultExport:f})=>{var p;s(c!=="default"),r[c]=(p=r[c])!==null&&p!==void 0?p:[],r[c].push({exportValue:g,exportSource:`${a.filePath} > ${f?`\`export default { ${c} }\``:`\`export { ${c} }\``}`,filePath:a.filePath,_filePath:a.filePath,_fileType:a.fileType,_isFromDefaultExport:f})})}),t){const{configValues:a}=t;Ye(a).forEach(([u,c])=>{var g,f,p;const h=t.configElements[u];s(h);const{configDefinedByFile:y,configDefinedAt:F}=h;s(y),i[u]=(g=i[u])!==null&&g!==void 0?g:c,n[u]=(f=n[u])!==null&&f!==void 0?f:[],s(n[u].length===0),n[u].push({configValue:c,configDefinedAt:F,configDefinedByFile:y});const E=u;r[E]=(p=r[E])!==null&&p!==void 0?p:[],r[E].push({exportValue:c,exportSource:F,filePath:y,_filePath:y,_fileType:null,_isFromDefaultExport:null})})}const o=et(),l={};return Object.entries(r).forEach(([a,u])=>{u.forEach(({exportValue:c,_fileType:g,_isFromDefaultExport:f})=>{var p;l[a]=(p=l[a])!==null&&p!==void 0?p:c,g===".page"&&!f&&(a in o||(o[a]=c))})}),s(!("default"in l)),s(!("default"in r)),{config:i,configEntries:n,exports:l,exportsAll:r,pageExports:o}}function Ze(e){const{filePath:t,fileExports:n}=e;s(n),s(le(t));const i=[];return Object.entries(n).sort(Ne(([r])=>r==="default")).forEach(([r,o])=>{let l=r==="default";if(l)if(Le(t))r="Page";else{m(w(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([a,u])=>{Xe(a,t),i.push({exportName:a,exportValue:u,isFromDefaultExport:l})});return}i.push({exportName:r,exportValue:o,isFromDefaultExport:l})}),i.forEach(({exportName:r,isFromDefaultExport:o})=>{s(!(o&&ce.includes(r)))}),i}function et(){return new Proxy({},{get(...e){return B()||R(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function tt(e){const t=".page.",n=O(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function S(e){ae(e)}function V(e,t){return s(!e.includes("\\")),e.includes("/_error")}function nt(e,t){if(t.length>0){const n=t.find(i=>i.pageId===e);return s(n),n.isErrorPage}else return V(e)}const it=[".page",".page.server",".page.route",".page.client",".css"];function rt(e){if(ae(e),e.endsWith(".css"))return".css";s(le(e),e);const n=e.split("/").slice(-1)[0].split("."),i=n.slice(-3)[0],r=n.slice(-2)[0];if(r==="page")return".page";if(s(i==="page",e),r==="server")return".page.server";if(r==="client")return".page.client";if(r==="route")return".page.route";s(!1,e)}function ue(e){const t=o=>r.pageId===o||r.isDefaultPageFile&&(Y(r.filePath)||st(o,r.filePath)),n=rt(e),r={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:A(e),isRendererPageFile:n!==".css"&&A(e)&&Y(e),isErrorPageFile:V(e),pageId:tt(e)};return r}function A(e){return S(e),V(e)?!1:e.includes("/_default")}function Y(e){return S(e),e.includes("/renderer/")}function st(e,t){S(e),S(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(A(t));const n=O(t.split("/"),0,-1).filter(i=>i!=="_default").join("/");return e.startsWith(n)}function ot(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(w(t)),s(d(t,"pageId","string")),s(d(t,"routeFilesystem","string")||d(t,"routeFilesystem","null")),s(d(t,"routeFilesystemDefinedBy","string")||d(t,"routeFilesystemDefinedBy","null")),s(d(t,"loadCodeFiles","function")),s(d(t,"isErrorPage","boolean")),s(d(t,"configElements","object")),fe(t.configElements,!1)})}function lt(e){fe(e,!0)}function fe(e,t){s(w(e)),Object.entries(e).forEach(([n,i])=>{if(s(w(i)||i===null),i===null){s(t);return}s(d(i,"configDefinedAt","string")),s(d(i,"plusConfigFilePath","string")||d(i,"plusConfigFilePath","null")),s(d(i,"configEnv","string")),s(d(i,"codeFilePath","string")||d(i,"codeFilePath","null")),s(d(i,"codeFileExport","string")||d(i,"codeFileExport","null")),s(d(i,"configValueSerialized","string")||d(i,"configValueSerialized","undefined")),(t||n==="route")&&s(d(i,"configValue")||d(i,"configValueSerialized"))})}const at=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],i=t[2];return new RegExp(n,i)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function H(e){const t=JSON.parse(e);return de(t)}function de(e){return typeof e=="string"?ct(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=de(n)}),e)}function ct(e){for(const{match:t,deserialize:n}of at)if(t(e))return n(e,H);return e}function ut(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,i])=>{ft(i),n==="route"&&dt(i)})})}function ft(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=H(t))}function dt(e){s(d(e,"configValue"));const{configValue:t}=e,n=typeof t;m(n==="string"||C(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function gt(e){s(d(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(d(e,"pageFilesLazy","object")),s(d(e,"pageFilesEager","object")),s(d(e,"pageFilesExportNamesLazy","object")),s(d(e,"pageFilesExportNamesEager","object")),s(d(e.pageFilesLazy,".page")),s(d(e.pageFilesLazy,".page.client")||d(e.pageFilesLazy,".page.server")),s(d(e,"pageFilesList","string[]")),s(d(e,"pageConfigs")),s(d(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;ot(t),ut(t),lt(n);const i={};$(e.pageFilesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var u;l=i[o]=(u=i[o])!==null&&u!==void 0?u:l;const c=a;q(c),l.loadFile=async()=>{"fileExports"in l||(l.fileExports=await c(),Ke(l))}}),$(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:l,globValue:a})=>{var u;l=i[o]=(u=i[o])!==null&&u!==void 0?u:l;const c=a;q(c),l.loadExportNames=async()=>{if(!("exportNames"in l)){const g=await c();m("exportNames"in g,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(d(g,"exportNames","string[]"),l.filePath),l.exportNames=g.exportNames}}}),$(e.pageFilesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var u;l=i[o]=(u=i[o])!==null&&u!==void 0?u:l;const c=a;s(w(c)),l.fileExports=c}),$(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:l,globValue:a})=>{var u;l=i[o]=(u=i[o])!==null&&u!==void 0?u:l;const c=a;s(w(c)),s(d(c,"exportNames","string[]"),l.filePath),l.exportNames=c.exportNames}),e.pageFilesList.forEach(o=>{var l;i[o]=(l=i[o])!==null&&l!==void 0?l:ue(o)});const r=Object.values(i);return r.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:r,pageConfigs:t,pageConfigGlobal:n}}function $(e){const t=[];return Object.entries(e).forEach(([n,i])=>{s(it.includes(n)),s(w(i)),Object.entries(i).forEach(([r,o])=>{const l=ue(r);s(l.fileType===n),t.push({filePath:r,pageFile:l,globValue:o})})}),t}function q(e){s(C(e))}const _=T("setPageFiles.ts",{});function ht(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:i}=gt(e);_.pageFilesAll=t,_.pageConfigs=n,_.pageConfigGlobal=i}async function pt(e,t){e?(s(!_.pageFilesGetter),s(t===void 0)):(s(_.pageFilesGetter),s(typeof t=="boolean"),(!_.pageFilesAll||!t)&&await _.pageFilesGetter());const{pageFilesAll:n,pageConfigs:i,pageConfigGlobal:r}=_;s(n&&i&&r);const o=yt(n,i);return{pageFilesAll:n,allPageIds:o,pageConfigs:i,pageConfigGlobal:r}}function yt(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),i=ne(n),r=t.map(o=>o.pageId);return[...i,...r]}function mt(e,t){return Et(e,t,!0)}function Et(e,t,n){const i=n?"CLIENT_ONLY":"SERVER_ONLY",r=e.filter(h=>h.isRelevant(t)&&h.fileType!==".page.route").sort(vt(n,t)),o=h=>{const y=r.filter(E=>E.pageId===t&&E.isEnv(h?"CLIENT_AND_SERVER":i));m(y.length<=1,`Merge the following files into a single file: ${y.map(E=>E.filePath).join(" ")}`);const F=y[0];return s(F===void 0||!F.isDefaultPageFile),F},l=o(!1),a=o(!0),u=h=>r.filter(y=>y.isRendererPageFile&&y.isEnv(h?"CLIENT_AND_SERVER":i))[0],c=u(!1),g=u(!0),f=r.filter(h=>h.isDefaultPageFile&&!h.isRendererPageFile&&(h.isEnv(i)||h.isEnv("CLIENT_AND_SERVER")));return[l,a,...f,c,g].filter(Ve)}function vt(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",i=-1,r=1,o=0;return(l,a)=>{if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;{const u=l.isRendererPageFile,c=a.isRendererPageFile;if(!u&&c)return i;if(!c&&u)return r;s(u===c)}{const u=K(t,l.filePath),c=K(t,a.filePath);if(u<c)return i;if(c<u)return r;s(u===c)}{if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i;if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r}return o}}function K(e,t){S(e),S(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const i=e.slice(n),r=t.slice(n),o=i.split("/").length,l=r.split("/").length;return o+l}const wt="modulepreload",bt=function(e){return"/"+e},X={},Ft=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=bt(o),o in X)return;X[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!i)for(let g=r.length-1;g>=0;g--){const f=r[g];if(f.href===o&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":wt,l||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),l)return new Promise((g,f)=>{c.addEventListener("load",g),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},_t="/",U={},Pt={},Rt={},xt={},St=[],Tt={},$t=!0,Ot=[{pageId:"/pages/idx",isErrorPage:!1,routeFilesystem:"/idx",routeFilesystemDefinedBy:"/pages/idx/",loadCodeFiles:async()=>(await Ft(()=>import("./pages_idx.879be354.js"),["assets/entries/pages_idx.879be354.js","assets/static/idx.47d85135.css"])).default,configElements:{onRenderHtml:{configDefinedAt:"/renderer/+onRenderHtml.tsx > `export default`",configDefinedByFile:"/renderer/+onRenderHtml.tsx",codeFilePath:"/renderer/+onRenderHtml.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-only"},onRenderClient:{configDefinedAt:"/renderer/+onRenderClient.tsx > `export default`",configDefinedByFile:"/renderer/+onRenderClient.tsx",codeFilePath:"/renderer/+onRenderClient.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"client-only"},Page:{configDefinedAt:"/pages/idx/+Page.tsx > `export default`",configDefinedByFile:"/pages/idx/+Page.tsx",codeFilePath:"/pages/idx/+Page.tsx",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"/renderer/+config.h.ts > `export default { passToClient }",configDefinedByFile:"/renderer/+config.h.ts",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/renderer/+config.h.ts",configEnv:"server-only",configValueSerialized:'["pageProps"]'},route:{configDefinedAt:"/pages/idx/+route.ts > `export default`",configDefinedByFile:"/pages/idx/+route.ts",codeFilePath:"/pages/idx/+route.ts",codeFileExport:"default",plusConfigFilePath:null,configEnv:"_routing-eager",configValue:_t},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},hasServerOnBeforeRender:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"false"}}}],Lt={onBeforeRoute:null},jt=Object.assign({}),Ct={...jt};U[".page"]=Ct;const It=Object.assign({}),Dt={...It};U[".page.client"]=Dt;const kt=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:$t,neverLoaded:Tt,pageConfigGlobal:Lt,pageConfigs:Ot,pageFilesEager:Pt,pageFilesExportNamesEager:xt,pageFilesExportNamesLazy:Rt,pageFilesLazy:U,pageFilesList:St},Symbol.toStringTag,{value:"Module"}));ht(kt);function Q(e){const t=e/1e3;if(t<120){const n=Z(t);return`${n} second${ee(n)}`}{const n=t/60,i=Z(n);return`${i} minute${ee(i)}`}}function Z(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function ee(e){return e==="1"?"":"s"}const At=T("utils/executeHook.ts",{userHookErrors:new Map});function Wt(e,t,n){const{timeoutErr:i,timeoutWarn:r}=zt(t);let o,l;const a=new Promise((f,p)=>{o=h=>{u(),f(h)},l=h=>{u(),p(h)}}),u=()=>{clearTimeout(c),clearTimeout(g)},c=setTimeout(()=>{R(!1,`The ${t}() hook defined by ${n} is taking more than ${Q(r)}`)},r),g=setTimeout(()=>{const f=Re(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Q(i)}`);l(f)},i);return(async()=>{try{const f=await e();o(f)}catch(f){w(f)&&At.userHookErrors.set(f,{hookName:t,hookFilePath:n}),l(f)}})(),a}function zt(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function ge(e){const t=window.location.href,{searchOriginal:n,hashOriginal:i,pathname:r}=Ce(t,"/");let o;return e!=null&&e.withoutHash?o=`${r}${n||""}`:o=`${r}${n||""}${i||""}`,s(o.startsWith("/")),o}s(B());function Nt(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);m(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const i=H(n);s(d(i,"pageContext","object"));const{pageContext:r}=i;return s(d(r,"_pageId","string")),x(r,{_pageContextRetrievedFromServer:{...r},_comesDirectlyFromServer:!0}),r}function Bt(e,t){var n;const i=e.filter(o=>o.pageId===t);return s(i.length<=1),(n=i[0])!==null&&n!==void 0?n:null}async function Vt(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(r=>{const{configName:o,codeFilePath:l}=r;let a;if(r.isPlusFile){const{codeFileExports:u}=r;o!=="client"&&Me(u,l),Object.entries(u).forEach(([c,g])=>{const f=c!=="default",p=f?c:r.configName,h=g;if(n[p]=h,f){const y=e.configElements[r.configName];s(y),e.configElements[p]={configValue:h,codeFileExport:c,codeFilePath:l,configDefinedByFile:l,configDefinedAt:`${l} > export { ${c} }`,configEnv:y.configEnv,plusConfigFilePath:null}}})}else a=r.codeFileExportValue,n[o]=a}),Object.entries(e.configElements).map(([r,o])=>{o.codeFilePath||(n[r]=o.configValue)}),x(e,{configValues:n})),e}const Ht="__whileFetchingAssets";async function Ut(e,t,n){const i=mt(e,n),r=Bt(t,n);let o;try{o=(await Promise.all([r&&Vt(r,!1),...i.map(h=>{var y;return(y=h.loadFile)===null||y===void 0?void 0:y.call(h)})]))[0]}catch(p){throw Gt(p)&&Object.assign(p,{[Ht]:!0}),p}const{config:l,configEntries:a,exports:u,exportsAll:c,pageExports:g}=Qe(i,o);return{config:l,configEntries:a,exports:u,exportsAll:c,pageExports:g,_pageFilesLoaded:i}}function Gt(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const te=ge({withoutHash:!0});async function Mt(){const e=Nt();return x(e,{isHydration:!0,isBackwardNavigation:null}),x(e,await Yt(e._pageId)),Jt(),e}function Jt(){const e=ge({withoutHash:!0});m(te===e,`URL manipulated before hydration finished (\`${te}\` to \`${e}\`). Ensure the hydration finishes with \`onHydrationEnd()\` before manipulating the URL.`)}async function Yt(e){const t={},{pageFilesAll:n,pageConfigs:i}=await pt(!0);return x(t,{_pageFilesAll:n,_pageConfigs:i}),x(t,await Ut(n,i,e)),n.filter(r=>r.fileType!==".page.server").forEach(r=>{var o;R(!(!((o=r.fileExports)===null||o===void 0)&&o.onBeforeRender),`\`export { onBeforeRender }\` of ${r.filePath} is loaded in the browser but never executed (because you are using Server-side Routing). In order to reduce the size of you browser-side JavaScript, define \`onBeforeRender()\` in \`.page.server.js\` instead. See https://vite-plugin-ssr.com/onBeforeRender-isomorphic#server-routing`,{onlyOnce:!0})}),t}function W(e,t){if(!(t in e.exports))return null;const n=e.exports[t],i=e.exportsAll[t][0];s(i.exportValue===n);const r=i.exportSource;return s(r),s(!t.endsWith(")")),m(C(n),`hook ${t}() defined by ${r} should be a function`),{hookFn:n,hookFilePath:r}}function qt(e,t){W(e,t)}function Kt(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[i])=>Be(n,i)).forEach(([n,i])=>{e[n]=i})}function Xt(e){Qt(e),Zt(e)}function Qt(e){nt(e._pageId,e._pageConfigs)&&s(d(e,"is404","boolean"))}function Zt(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!w(t)){R(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const I=T("preparePageContextForUserConsumptionClientSide.ts",{});function en(e,t){if(t){const r=e;s([!0,!1].includes(r.isHydration)),s([!0,!1,null].includes(r.isBackwardNavigation))}else{const r=e;s(r.isHydration===!0),s(r.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(w(e.pageExports));const n=e.exports.Page;x(e,{Page:n}),on(e),Kt(e),s([!0,!1].includes(e._comesDirectlyFromServer));const i=e._comesDirectlyFromServer?rn(e):e;return Xt(e),i}const tn=["then","toJSON"],nn=["_pageId"];function rn(e){return new Proxy(e,{get:n});function t(i){return!(i in e||tn.includes(i)||typeof i=="symbol"||typeof i!="string"||i.startsWith("__v_"))}function n(i,r){return I.disableAssertPassToClient!==r&&sn(e._pageContextRetrievedFromServer,r,t(r)),I.disableAssertPassToClient=r,window.setTimeout(()=>{I.disableAssertPassToClient=void 0},0),e[r]}}function sn(e,t,n){if(!n||e===null)return;const i=Object.keys(e).filter(r=>!nn.includes(r));m(!1,[`pageContext.${t} isn't available in the browser`,`('${t}' is missing in the passToClient list [${i.map(r=>`'${r}'`).join(", ")}]).`,`Did you forget to add '${t}' to the passToClient list?`,"See https://vite-plugin-ssr.com/passToClient"].join(" "))}function on(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}async function ln(e,t){const n=en(e,t);let i=null,r;i=W(e,"render"),r="render";{const a=W(e,"onRenderClient");a&&(i=a,r="onRenderClient")}if(!i){const a=an(e);if(e._pageConfigs.length>0)m(!1,`No onRenderClient() hook defined for URL '${a}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const u=e._pageFilesLoaded.filter(g=>g.fileType===".page.client");let c;u.length===0?c="No file `*.page.client.*` found for URL "+a:c="One of the following files should export a `render()` hook: "+u.map(g=>g.filePath).join(" "),m(!1,c)}}s(i);const o=i.hookFn;s(r);const l=await Wt(()=>o(n),r,i.hookFilePath);m(l===void 0,`The ${r}() hook defined by ${i.hookFilePath} isn't allowed to return a value`)}function an(e){let t;try{t=e.urlOriginal}catch{}return t=t??window.location.href,t}xe();ve(!0);cn();async function cn(){var e,t;const n=await Mt();await ln(n,!1),qt(n,"onHydrationEnd"),await((t=(e=n.exports).onHydrationEnd)===null||t===void 0?void 0:t.call(e,n))}
